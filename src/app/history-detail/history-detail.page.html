<ion-header [translucent]="true"></ion-header>

<ion-content [fullscreen]="true">
  <div class="container">
    <div class="header">
      <ion-icon name="arrow-back-outline" class="icon" (click)="goBack()"></ion-icon>
      <div class="header-title">
        <p style="color: black;">Detail Reservasi</p>
      </div>
      <div class="icon-header">
        <ion-icon name="close-outline" class="icon2" (click)="closePage()"></ion-icon>
      </div>
    </div>

    <!-- Card Detail History -->
    <ion-card class="history-card" *ngIf="detailReservasi; else loading">
      <ion-card-content>
        <div class="detail-item">
          <strong>ID:</strong>
          <span>{{ detailReservasi.kode_reservasi }}</span>
        </div>
        <div class="detail-item">
          <strong>Tanggal:</strong>
          <span>{{ detailReservasi.tanggal | date:'fullDate' }}</span>
        </div>
        <div class="detail-item">
          <strong>Jam :</strong>
          <span>{{ detailReservasi.sesi }}</span>
        </div>
        <div class="detail-item">
          <strong>Nama :</strong>
          <span>{{ detailReservasi.pengguna?.nama }}</span>
        </div>

        <!-- Header Menu -->
        <div class="detail-item">
          <div class="menu-detail" style="display: flex; flex-direction: row; gap: 60px;">
            <div class="detail-item">
              Nama Menu
            </div>
            <div class="detail-item">
              Qty
            </div>
            <div class="detail-item">
              Harga
            </div>
          </div>
        </div>

        <!-- List Pesanan -->
        <div *ngFor="let item of detailReservasi.pesanan" class="detail-item">
          <div class="menu-detail" style="display: flex; flex-direction: row; gap: 60px;">
            <div class="detail-item">
              {{ item.menu?.nama || 'Nama Menu' }}
            </div>
            <div class="detail-item">
              {{ item.jumlah }}
            </div>
            <div class="detail-item">
              {{ item.menu?.harga | currency:'IDR':'symbol':'1.0-0':'id' }}
            </div>
          </div>
          <div class="detail-item" style="margin-left: 10px;">
            <em>Catatan: {{ item.catatan || '-' }}</em>
          </div>
        </div>

        <div class="detail-item">
          <strong>Metode Pembayaran :</strong>
          <span>{{ detailReservasi.pembayaran?.metode_pembayaran || '-' }}</span>
        </div>
      </ion-card-content>
    </ion-card>

    <ng-template #loading>
      <p>Loading...</p>
    </ng-template>

    <!-- footer -->
    <ion-footer>
      <div class="bottom-navbar">
        <div class="nav-button">
          <ion-icon name="home-outline"></ion-icon>
        </div>
        <div class="nav-button">
          <ion-icon name="book-outline"></ion-icon>
        </div>
        <div class="nav-button">
          <ion-icon name="document-text-outline"></ion-icon>
        </div>
        <div class="nav-button">
          <ion-icon name="person-outline"></ion-icon>
        </div>
      </div>
    </ion-footer>
  </div>
</ion-content>
